

proc getReducedIBPSystem_gpi(token ibp)
{
  list v = ibp.data[1];
  list e = ibp.data[2];
  list targetInt = ibp.data[3];


  graph G;
  G.vertices = v;
  G.edges = e;

  list L = pickHighestSector(targetInt);

  list web = generateWebSectors(L[1][1]);

  web = setSectorMap(web);

  list w4 = updateWeb(web, list(1, 1), targetInt);
  string path = "/home/atraore/gpi/try_gpi/feynman_ibp/example_dir/temp";  // Ensure the path ends with a "/"
  string filename = "hello.ssi";
  link l = "ssi:w " + path + filename;
  write(l, w4, "hello");
  close(l);
  web = w4[1];

  labeledgraph G1 = computeBaikovMatrix(G);
  setIBP reducedIBPs;
  list MI;
  //reducedIBPs.over=G1.baikovover;
  int te = 0;
  reducedIBPs.seed = targetInt;



  token output;
  output.fieldnames = list("generators", "GroebnerBasis");
  output.data[1] = reducedIBPs;
  output.data[2] = MI;
  output.data[3] = G1;
  output.data[4] = web;

  return(output);


}