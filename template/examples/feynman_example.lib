LIB "feynman.lib";

// Configure GPI-Space	
configToken gc = configure_gspc();
gc.options.tmpdir = "/tmp/feynman_example";
gc.options.nodefile = "nodefile";
gc.options.procspernode = 7;
gc.options.loghost = "localhost";
gc.options.logport = 9876;

ring R = 0, x, dp;

// Define a simple Feynman graph
list v = list(1, 2, 3, 4, 5, 6); // vertices
list e = list(list(6, 1), list(4, 6), list(1, 2), list(3, 5), list(4, 3), list(2, 5), list(5, 6), list(1), list(2), list(3), list(4)); // edges 
list targetInt = list(list(1, 1, 1, -1, -3, -1, -1, -1, -1), list(1, -1, 1, -1, -3, -1, -1, -4, -1));

list L = v, e, targetInt;

// Run Feynman computation
rtimer = 0;
system("--ticks-per-sec", 1000); // set timer resolution to ms
int t = rtimer;
def re = gspc_feynman(L, gc);
re;

rtimer - t;
print("timer"); 